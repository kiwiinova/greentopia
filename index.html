<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GreenTopia Grocery Store</title>
    <link rel="stylesheet" href="../CSS/Page1.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../part 3/normalize.css">
    <link rel="stylesheet" href="../part 3/skeleton.css">
    <link rel="stylesheet" href="../part 3/custom.css">
    <script src="https://kit.fontawesome.com/22f06b9912.js" crossorigin="anonymous"></script>
<!--     <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="script.js"></script>  -->
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  
  <script>
        var cart = [];
        $(function () {
            if (localStorage.cart)
            {
                cart = JSON.parse(localStorage.cart);
                showCart();
            }
        });

        function addToCart() {
            var sum= 0.0;
            var img1 = $(this).data('image');
            var price1 = $('.price .u-pull-right').text().replace("$", "");
            var price = parseFloat(price1);
            var name = $('h4').text();
            var qty = $('.count').val();
            var amount = (qty*price);

            sum+=amount;
            

            $('#totalPrice').text('$'+ sum);
            
            

           

            // update qty if product is already present
            for (var i in cart) {
                if(cart[i].Name == name)
                {
                    cart[i].Quantity = qty;
                    showCart();
                    saveCart();
                    return;
                }
            }
            // create JavaScript Object
            var item = {Image: img1, Name: name, Price: price, Quantity: qty }; 
            cart.push(item);
            console.log(cart);return false;
            saveCart();
            showCart();
        }

        function deleteItem(index){
            cart.splice(index,1); // delete item at index
            console.log(index);
            showCart();
            saveCart();
        }

        function saveCart() {
            if ( window.localStorage)
            {
                localStorage.cart = JSON.stringify(cart);
            }
        }

        function showCart() {
            // if (cart.length == 0) {
            //     $("#cart-content").css("visibility", "hidden");
            //     return;
            // }

            $("#cart-content").css("visibility", "visible");
            $("#cart-content tbody").empty();
            for (var i in cart) {
                var item = cart[i];
                var row = "<tr><td><img src='"+ item.Image +"' >" + "</td><td>" + item.Name + "</td><td>" +
                             item.Quantity + "</td><td>" + item.Quantity * item.Price + " $" + "</td><td>"
                             + "<button onclick='deleteItem(" + i + ")'>X</button></td></tr>";
                $("#cart-content tbody").append(row);
                buttonActivator();
            }
            $("button").css({"border": "1px solid red", "border-radius": "50%", "padding": "5px 10px", "text-decoration": "none", "color": "red", "width": "30px", "height": "30px", "flex-direction" : "column", "justify-content" : "center" , "align-item" : "center", "cursor": "pointer"});
           
    }    
    </script>
  </head>

  <body>
    
    <div class="logo"></div>

    
    
    <header>
   
      <input type="checkbox" id="menu" />
      <label for="menu"><i class="material-icons">menu</i></label>

      <nav class ="navbar">
        <ul>
          <li><a href="#"><i class="fa fa-home fa-fw" aria-hidden="true"></i>&nbsp; Home</a></li>
          <li>
            <a href="#"><i class="fa fa-angle-double-down" aria-hidden="true"></i>&nbsp; Aisles</a>
            <ul>
              <li><a href="../part 2/FruitsAndVeggies.html" #fruitsveggies>Fruits and Veggies</a></li>
              <li><a href="../part 2/DairyAndEggs.html" #dairyeggs>Dairy and Eggs</a></li>
              <li><a href="../part 2/BreadsAndPasta.html" #breadspasta>Breads and Pasta</a></li>
              <li><a href="../part 2/MeatsAndFish.html" #meatsfish>Meat and Fish</a></li>
            </ul>
          </li>
          <li><a href="../HTML/P4.html"><i class="fa fa-opencart" aria-hidden="true"></i>&nbsp; Shopping Cart</a></li>
          <li><a href="../HTML/P5.html"><i class="fa fa-user-o" aria-hidden="true"></i>&nbsp; Login</a></li>
          
          
        <div class="navbar-right">                   
<!--               <h1><i class="fa-solid fa-basket-shopping"></i></h1> -->
               <ul>
                    <li class="submenu">
                        <img alt="image of a shopping cart" src="../Images/basket-icon-7.jpg" id="img-cart">
                            <div id="shopping-cart">
                                    <table id="cart-content" class="u-full-width">
                                        <thead>
                                            <tr>
                                                <th>Image</th>
                                                <th>Name</th>
                                                <th>Quantity</th>
                                                <th>Price</th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>

                                    <a href="#" id="clear-cart" class="button u-full-width">Clear Cart</a>
                                    Total price: <strong id="totalPrice">0 $</strong>
                            </div>
                    </li>
                </ul>                      
      </div>

          </ul>
      </nav>
    </header>
   
<!--     <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script> -->
    <script type ="text/javascript"  src="script.js"></script>
   
<!--     <script> -->
      
<!--       var modal = document.getElementById("myModal");
      
      var btn = document.getElementById("cart");
      
      var span = document.getElementsByClassName("close")[0];
      
      btn.onclick = function() {
        modal.style.display = "block";          
      }
      
      span.onclick = function() {
        modal.style.display = "none";
      }
      
      window.onclick = function(event) {
          if (event.target == modal) {
         modal.style.display = "none";
             }
          } -->
<!-- </script> -->
    
    <footer>
      <h2>&copy; Copyright Reserved. <a href="../HTML/AdminLogIn_P5.html" class="btnAdmin"><i class="fas fa-user"></i>&nbsp; Admin</a></h2>
    </footer>
  </body>
</html>

